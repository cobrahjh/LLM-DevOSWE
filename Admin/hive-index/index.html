<!DOCTYPE html>
<html>
<head>
    <title>Hive Index - Everything</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%);
            color: #e0e0e0;
            padding: 20px;
            min-height: 100vh;
        }
        h1 { color: #ff00ff; margin-bottom: 5px; font-size: 28px; }
        .subtitle { color: #666; margin-bottom: 25px; }
        h2 { color: #ff00ff; font-size: 16px; margin: 25px 0 15px 0; text-transform: uppercase; letter-spacing: 1px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; }

        .card {
            background: #12121a;
            border: 1px solid #2a2a3a;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .card:hover { border-color: #ff00ff; transform: translateY(-2px); }
        .card.offline { opacity: 0.5; }
        .card.offline:hover { border-color: #ef4444; }

        .card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .icon { font-size: 28px; }
        .card-title { flex: 1; }
        .card-title h3 { font-size: 16px; color: #fff; margin-bottom: 2px; }
        .card-title .port { font-size: 11px; color: #888; }

        .status {
            width: 10px; height: 10px;
            border-radius: 50%;
            background: #4ade80;
        }
        .status.offline { background: #ef4444; }
        .status.unknown { background: #fbbf24; }

        .card-desc { font-size: 12px; color: #888; line-height: 1.4; }

        .section { margin-bottom: 30px; }

        .projects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 15px; }
        .project-card {
            background: #12121a;
            border: 1px solid #2a2a3a;
            border-radius: 10px;
            padding: 15px;
        }
        .project-card h3 { color: #fff; margin-bottom: 8px; }
        .project-card .path { font-size: 11px; color: #666; font-family: monospace; margin-bottom: 8px; }
        .project-card .desc { font-size: 12px; color: #888; }

        .docs-list { display: flex; flex-wrap: wrap; gap: 10px; }
        .doc-link {
            background: #1a1a2a;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 12px;
            color: #a0a0a0;
            text-decoration: none;
            border: 1px solid #2a2a3a;
        }
        .doc-link:hover { border-color: #ff00ff; color: #fff; }

        .ai-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; }
        .ai-card {
            background: #12121a;
            border: 1px solid #2a2a3a;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }
        .ai-card .avatar { font-size: 30px; margin-bottom: 5px; }
        .ai-card .name { font-size: 14px; color: #fff; }
        .ai-card .role { font-size: 10px; color: #888; }
        .ai-card .voice { font-size: 9px; color: #666; margin-top: 3px; }

        .refresh-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ff00ff;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        .refresh-btn:hover { opacity: 0.8; }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }
        .stat {
            background: #12121a;
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-value { font-size: 28px; color: #ff00ff; font-weight: bold; }
        .stat-label { font-size: 11px; color: #888; text-transform: uppercase; }

        .quick-links {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .quick-link {
            background: #ff00ff;
            color: #fff;
            padding: 8px 15px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 12px;
        }
        .quick-link:hover { opacity: 0.8; }
        .quick-link.secondary { background: #333; }
    </style>
</head>
<body>
    <h1>üêù HIVE INDEX</h1>
    <p class="subtitle">Everything in one place. Updated: <span id="timestamp"></span></p>

    <div class="stats" id="stats">
        <div class="stat">
            <div class="stat-value" id="servicesOnline">-</div>
            <div class="stat-label">Services Online</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="totalServices">-</div>
            <div class="stat-label">Total Services</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="aiCount">6</div>
            <div class="stat-label">AI Personas</div>
        </div>
    </div>

    <div class="quick-links">
        <a href="http://localhost:8585" class="quick-link">KittBox</a>
        <a href="http://localhost:8500" class="quick-link">Orchestrator</a>
        <a href="http://localhost:8701" class="quick-link">Hive-Mind</a>
        <a href="http://localhost:8770" class="quick-link">Personas</a>
        <a href="http://localhost:8770/test" class="quick-link secondary">Test Voices</a>
    </div>

    <div class="section">
        <h2>üîå Services</h2>
        <div class="grid" id="services"></div>
    </div>

    <div class="section">
        <h2>üìÅ Projects</h2>
        <div class="projects-grid" id="projects"></div>
    </div>

    <div class="section">
        <h2>ü§ñ AI Personas</h2>
        <div class="ai-grid" id="personas"></div>
    </div>

    <div class="section">
        <h2>üìö Documentation</h2>
        <div class="docs-list" id="docs"></div>
    </div>

    <button class="refresh-btn" onclick="checkAll()">üîÑ Refresh</button>

    <script>
        const services = [
            { name: "Oracle", port: 3002, icon: "üîÆ", desc: "LLM backend, project API", health: "/api/health" },
            { name: "SimWidget", port: 8080, icon: "‚úàÔ∏è", desc: "MSFS SimConnect bridge", health: "/api/status" },
            { name: "Orchestrator", port: 8500, icon: "üéõÔ∏è", desc: "Health watchdog, service monitor", health: "/health" },
            { name: "KittBox", port: 8585, icon: "üê±", desc: "Command Center UI", health: "/api/health" },
            { name: "Relay", port: 8600, icon: "üì°", desc: "Message queue, persistence", health: "/api/health" },
            { name: "Hive-Mind", port: 8701, icon: "üëÅÔ∏è", desc: "Real-time activity monitor", health: "/api/health" },
            { name: "Mesh", port: 8750, icon: "üï∏Ô∏è", desc: "Agent registration network", health: "/api/health" },
            { name: "Personas", port: 8770, icon: "üë§", desc: "AI voice & personality", health: "/health" },
            { name: "Agents", port: 8800, icon: "ü§ñ", desc: "HiveImmortal orchestration", health: "/api/health" },
            { name: "Hive Brain", port: 8810, icon: "üß†", desc: "Device discovery", health: "/api/health" },
            { name: "Master Mind", port: 8820, icon: "üéØ", desc: "Parallel LLM orchestrator", health: "/api/health" },
            { name: "Hive Oracle", port: 8850, icon: "üåê", desc: "Distributed LLM", health: "/api/health" },
            { name: "Terminal Hub", port: 8771, icon: "üíª", desc: "Web terminal manager", health: "/api/health" },
            { name: "Ollama", port: 11434, icon: "ü¶ô", desc: "Local LLM inference", health: "/api/tags" },
        ];

        const projects = [
            { name: "LLM-DevOSWE", path: "C:\\LLM-DevOSWE", desc: "Main Hive framework - services, admin tools, SimWidget" },
            { name: "DevClaude", path: "C:\\DevClaude", desc: "HiveImmortal agents - Hivemind, Personas, Mesh" },
            { name: "LLM-Oracle", path: "C:\\LLM-Oracle", desc: "Oracle daemon - LLM backend, project API" },
            { name: "KittBox Modules", path: "C:\\kittbox-modules", desc: "Desktop apps - Kitt Live, voice assistant" },
            { name: "SimWidget Hybrid", path: "C:\\LLM-DevOSWE\\simwidget-hybrid", desc: "MSFS overlay system - widgets, camera control" },
            { name: "PMS50 Prototype", path: "C:\\PMS50-Prototype", desc: "GTN750 avionics for MSFS 2024" },
            { name: "devTinyAI", path: "C:\\devTinyAI", desc: "AI sandbox for experiments" },
        ];

        const personas = [
            { name: "Kit", avatar: "ü§ñ", role: "Team Lead", voice: "Andrew", color: "#4ade80" },
            { name: "Oracle", avatar: "üîÆ", role: "Voice Gateway", voice: "Davis", color: "#a78bfa" },
            { name: "Mind", avatar: "üß†", role: "Thinker", voice: "Emma", color: "#f472b6" },
            { name: "Nova", avatar: "üåü", role: "Researcher", voice: "Aria", color: "#c084fc" },
            { name: "Mistral", avatar: "ü¶ô", role: "LLM Worker", voice: "Guy", color: "#60a5fa" },
            { name: "Phi", avatar: "üê£", role: "Small Model", voice: "Jenny", color: "#fde047" },
        ];

        const docs = [
            { name: "SERVICE-REGISTRY.md", desc: "All services & ports" },
            { name: "STANDARDS.md", desc: "Code patterns" },
            { name: "ARCHITECTURE.md", desc: "System diagrams" },
            { name: "HIVE-PROTOCOLS.md", desc: "AI protocols" },
            { name: "PERSONAS.md", desc: "AI identities" },
            { name: "CLAUDE-CODE-GUIDE.md", desc: "CLI reference" },
        ];

        // Render static content
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
        document.getElementById('totalServices').textContent = services.length;

        // Render projects
        document.getElementById('projects').innerHTML = projects.map(p => `
            <div class="project-card">
                <h3>${p.name}</h3>
                <div class="path">${p.path}</div>
                <div class="desc">${p.desc}</div>
            </div>
        `).join('');

        // Render personas
        document.getElementById('personas').innerHTML = personas.map(p => `
            <div class="ai-card" style="border-color: ${p.color}40">
                <div class="avatar">${p.avatar}</div>
                <div class="name">${p.name}</div>
                <div class="role">${p.role}</div>
                <div class="voice">${p.voice} (Natural)</div>
            </div>
        `).join('');

        // Render docs
        document.getElementById('docs').innerHTML = docs.map(d => `
            <span class="doc-link" title="${d.desc}">${d.name}</span>
        `).join('');

        // Check services
        async function checkService(svc) {
            try {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 2000);
                const res = await fetch(`http://localhost:${svc.port}${svc.health}`, {
                    signal: controller.signal,
                    mode: 'no-cors'
                });
                clearTimeout(timeout);
                return true;
            } catch {
                return false;
            }
        }

        async function checkAll() {
            const container = document.getElementById('services');
            container.innerHTML = services.map(svc => `
                <a href="http://localhost:${svc.port}" target="_blank" class="card" id="svc-${svc.port}">
                    <div class="card-header">
                        <span class="icon">${svc.icon}</span>
                        <div class="card-title">
                            <h3>${svc.name}</h3>
                            <span class="port">:${svc.port}</span>
                        </div>
                        <div class="status unknown"></div>
                    </div>
                    <div class="card-desc">${svc.desc}</div>
                </a>
            `).join('');

            let online = 0;
            for (const svc of services) {
                const isOnline = await checkService(svc);
                const card = document.getElementById(`svc-${svc.port}`);
                const status = card.querySelector('.status');
                if (isOnline) {
                    status.classList.remove('unknown', 'offline');
                    online++;
                } else {
                    status.classList.remove('unknown');
                    status.classList.add('offline');
                    card.classList.add('offline');
                }
            }
            document.getElementById('servicesOnline').textContent = online;
            document.getElementById('timestamp').textContent = new Date().toLocaleString();
        }

        // Initial check
        checkAll();
    </script>
</body>
</html>
