<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>CockpitFX - SimGlass</title>
<link rel="stylesheet" href="/ui/shared/widget-common.css">
<link rel="stylesheet" href="/ui/shared/themes.css">
<link rel="stylesheet" href="/ui/shared/settings-panel.css">
<link rel="stylesheet" href="/ui/shared/responsive.css">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<button class="settings-btn" id="settings-btn" title="Settings">&#9881;</button>
<button id="compact-toggle" class="compact-toggle" title="Toggle compact mode">&#9639;</button>

<div class="cfx" id="widget-root">
<div class="cfx-full">
    <!-- ROW 1: Data strip -->
    <div class="cfx-data">
        <div class="cfx-data-grp">
            <span class="cfx-data-lbl">RPM</span>
            <span class="cfx-data-val" id="cfx-rpm">0</span>
        </div>
        <div class="cfx-data-sep"></div>
        <div class="cfx-data-grp">
            <span class="cfx-data-lbl">IAS</span>
            <span class="cfx-data-val" id="cfx-ias">0</span>
        </div>
        <div class="cfx-data-sep"></div>
        <div class="cfx-data-grp">
            <span class="cfx-data-lbl">AOA</span>
            <span class="cfx-data-val" id="cfx-aoa">0.0</span>
        </div>
        <div class="cfx-data-sep"></div>
        <div class="cfx-data-grp">
            <span class="cfx-data-lbl">G</span>
            <span class="cfx-data-val" id="cfx-gvert">1.00</span>
        </div>
        <div class="cfx-data-sep"></div>
        <div class="cfx-data-grp">
            <span class="cfx-data-lbl">SFC</span>
            <span class="cfx-data-val" id="cfx-sfc" style="font-size:8px">---</span>
        </div>
        <span class="cfx-status-dot off" id="cfx-dot"></span>
    </div>

    <!-- ROW 2: Main canvas + overlays -->
    <div class="cfx-main">
        <canvas class="cfx-canvas" id="cfx-canvas"></canvas>

        <!-- Profile badge (center-top) -->
        <div class="cfx-profile-badge" id="cfx-profile-badge">GA SINGLE</div>

        <!-- Corner overlays -->
        <div class="cfx-corner tl">
            <span class="cfx-corner-lbl">PITCH</span>
            <span class="cfx-corner-val" id="cfx-pitch">0.0&deg;/s</span>
        </div>
        <div class="cfx-corner bl">
            <span class="cfx-corner-lbl">YAW</span>
            <span class="cfx-corner-val" id="cfx-yaw">0.0&deg;/s</span>
        </div>
        <div class="cfx-corner br">
            <span class="cfx-corner-lbl">TURB</span>
            <span class="cfx-corner-val cyan" id="cfx-turb">0%</span>
        </div>

        <!-- Layer activity bars (right edge) -->
        <div class="cfx-layers" id="cfx-layers">
            <div class="cfx-lbar"><span class="cfx-lbar-lbl">ENG</span><div class="cfx-lbar-track"><div class="cfx-lbar-fill" id="cfx-lb-engine"></div></div></div>
            <div class="cfx-lbar"><span class="cfx-lbar-lbl">AERO</span><div class="cfx-lbar-track"><div class="cfx-lbar-fill" id="cfx-lb-aero"></div></div></div>
            <div class="cfx-lbar"><span class="cfx-lbar-lbl">GND</span><div class="cfx-lbar-track"><div class="cfx-lbar-fill" id="cfx-lb-ground"></div></div></div>
            <div class="cfx-lbar"><span class="cfx-lbar-lbl">MECH</span><div class="cfx-lbar-track"><div class="cfx-lbar-fill" id="cfx-lb-mech"></div></div></div>
            <div class="cfx-lbar"><span class="cfx-lbar-lbl">ENV</span><div class="cfx-lbar-track"><div class="cfx-lbar-fill" id="cfx-lb-env"></div></div></div>
            <div class="cfx-lbar"><span class="cfx-lbar-lbl">WARN</span><div class="cfx-lbar-track"><div class="cfx-lbar-fill" id="cfx-lb-warn"></div></div></div>
        </div>
    </div>

    <!-- ROW 3: Master volume / bass strip -->
    <div class="cfx-strip">
        <span class="cfx-strip-lbl">VOL</span>
        <input type="range" class="cfx-strip-slider" id="fx-master-vol" min="0" max="100" value="80">
        <span class="cfx-strip-val" id="fx-master-pct">80</span>
        <div class="cfx-strip-sep"></div>
        <span class="cfx-strip-lbl">BASS</span>
        <input type="range" class="cfx-strip-slider" id="fx-bass-vol" min="0" max="100" value="0">
        <span class="cfx-strip-val" id="fx-bass-vol-val">0</span>
        <div class="cfx-strip-sep"></div>
        <span class="cfx-strip-lbl">LP</span>
        <span class="cfx-strip-val" id="fx-bass-freq-val" style="font-size:8px">120</span>
    </div>

    <!-- ROW 4: Softkeys -->
    <div class="cfx-softkeys">
        <div class="cfx-sk" id="cfx-sk-power">ON</div>
        <div class="cfx-sk profile-sk" id="cfx-sk-profile">GA SNGL</div>
        <div class="cfx-sk" id="cfx-sk-bass-up">LP+</div>
        <div class="cfx-sk" id="cfx-sk-bass-dn">LP-</div>
        <div class="cfx-sk" id="cfx-sk-layers">LYRS</div>
        <div class="cfx-sk" id="cfx-sk-shake">SHKE</div>
    </div>
</div><!-- /cfx-full -->

<!-- Compact view -->
<div class="cfx-compact">
    <div class="cell">
        <span class="lbl">ACTIVE FX</span>
        <span class="val" id="cfx-compact-active">0/6</span>
    </div>
    <div class="cell">
        <span class="lbl">MASTER</span>
        <span class="val" id="cfx-compact-power">OFF</span>
    </div>
    <div class="cell">
        <span class="lbl">PROFILE</span>
        <span class="val" id="cfx-compact-profile">GA SNGL</span>
    </div>
</div>

</div><!-- /widget-root -->

<!-- Hidden persistence elements (layer volumes/enables stored internally) -->
<div class="cfx-hidden">
    <input id="fx-bass-freq" type="hidden" value="120">
    <span id="conn-status"></span>
</div>

<!-- Shared Scripts -->
<script src="/ui/shared/settings-panel.js"></script>
<script src="/ui/shared/theme-switcher.js"></script>
<script src="/ui/shared/safe-channel.js"></script>
<script src="/ui/shared/themes.js"></script>
<script src="/ui/shared/platform-utils.js"></script>
<script src="/ui/shared/telemetry.js"></script>
<script src="/ui/shared/feedback-section.js"></script>
<script src="/ui/shared/widget-base.js"></script>
<!-- CockpitFX Scripts -->
<script src="profiles.js"></script>
<script src="audio-engine.js"></script>
<script src="layers/engine-layer.js"></script>
<script src="layers/aero-layer.js"></script>
<script src="layers/ground-layer.js"></script>
<script src="layers/mechanical-layer.js"></script>
<script src="layers/environment-layer.js"></script>
<script src="layers/warning-layer.js"></script>
<script src="shake-engine.js"></script>
<script src="pane.js"></script>
<script>
    window.widget = new CockpitFxPane();
    window.addEventListener('beforeunload', () => window.widget?.destroy());
</script>
</body>
</html>
