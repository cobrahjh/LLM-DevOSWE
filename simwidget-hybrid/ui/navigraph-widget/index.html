<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigraph Charts - SimWidget</title>
    <link rel="stylesheet" href="/ui/shared/widget-common.css">
    <link rel="stylesheet" href="/ui/shared/settings-panel.css">
    <link rel="stylesheet" href="/ui/shared/widget-customizer.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <button class="settings-btn" id="settings-btn" title="Settings">‚öôÔ∏è</button>
    <div class="widget-container">
        <div class="widget-header">
            <span class="widget-title">üó∫Ô∏è Navigraph Charts</span>
            <div class="header-controls">
                <button class="btn-icon" id="btn-refresh" title="Refresh">üîÑ</button>
            </div>
        </div>

        <div class="airport-search">
            <input type="text" id="airport-input" placeholder="Enter ICAO (e.g., KJFK)" maxlength="4">
            <button class="btn-search" id="btn-search">Search</button>
        </div>

        <div class="chart-tabs" id="chart-tabs">
            <button class="tab-btn active" data-type="all">All</button>
            <button class="tab-btn" data-type="apt">Airport</button>
            <button class="tab-btn" data-type="sid">SID</button>
            <button class="tab-btn" data-type="star">STAR</button>
            <button class="tab-btn" data-type="app">Approach</button>
        </div>

        <div class="charts-content" id="charts-content">
            <div class="ready-notice" id="auth-notice">
                <div class="notice-icon">&#128506;&#65039;</div>
                <div class="notice-title">Enter an ICAO code to search charts</div>
                <div class="notice-text">Free charts from FAA DTPP (US), SkyVector, and ChartFox. No subscription required.</div>
                <button class="btn-connect" id="btn-connect">View Chart Sources</button>
            </div>
        </div>

        <div class="chart-viewer" id="chart-viewer" style="display: none;">
            <div class="viewer-header">
                <button class="btn-back" id="btn-back">‚Üê Back</button>
                <span class="chart-title" id="chart-title">Chart</span>
                <div class="viewer-controls">
                    <button class="btn-zoom" id="btn-zoom-out">‚àí</button>
                    <button class="btn-zoom" id="btn-zoom-in">+</button>
                </div>
            </div>
            <div class="viewer-content" id="viewer-content">
                <img id="chart-image" src="" alt="Chart">
            </div>
        </div>
    </div>

    <script src="/ui/shared/settings-panel.js"></script>
    <script src="/ui/shared/widget-customizer.js"></script>
    <script src="widget.js"></script>
    <script>
        const settings = new SettingsPanel();
        const customizer = new WidgetCustomizer({ widgetId: 'navigraph-widget', settingsPanel: settings });
        document.getElementById('settings-btn').addEventListener('click', () => settings.toggle());
    </script>
</body>
</html>
