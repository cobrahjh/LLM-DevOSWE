<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otto - SimWidget Command Search</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/ui/shared/settings-panel.css">
    <link rel="stylesheet" href="/ui/shared/widget-customizer.css">
</head>
<body>
    <button class="settings-btn" id="settings-btn" title="Settings">⚙️</button>
    <div class="otto-container">
        <!-- Search Bar -->
        <div class="search-wrapper">
            <div class="search-icon">&#128269;</div>
            <input type="text"
                   id="searchInput"
                   class="search-input"
                   placeholder="Type a command... (e.g., gear, flaps, autopilot)"
                   autocomplete="off"
                   autofocus>
            <div class="search-hint">
                <kbd>Enter</kbd> to execute &bull; <kbd>Esc</kbd> to clear
            </div>
        </div>

        <!-- Results List -->
        <div class="results-container" id="results">
            <!-- Results will be populated by JS -->
        </div>

        <!-- Category Filter -->
        <div class="category-bar" id="categoryBar">
            <button class="category-btn active" data-category="all">All</button>
            <button class="category-btn" data-category="flight">Flight</button>
            <button class="category-btn" data-category="lights">Lights</button>
            <button class="category-btn" data-category="autopilot">Autopilot</button>
            <button class="category-btn" data-category="engine">Engine</button>
            <button class="category-btn" data-category="camera">Camera</button>
            <button class="category-btn" data-category="radio">Radio</button>
        </div>

        <!-- Status -->
        <div class="status-bar">
            <span class="status-dot" id="status"></span>
            <span class="status-text" id="statusText">Connecting...</span>
            <span class="result-count" id="resultCount"></span>
        </div>
    </div>

    <script src="/ui/shared/settings-panel.js"></script>
    <script src="/ui/shared/widget-customizer.js"></script>
    <script src="widget.js"></script>
    <script>
        const settings = new SettingsPanel();
        const customizer = new WidgetCustomizer({ widgetId: 'otto-search', settingsPanel: settings });
        document.getElementById('settings-btn').addEventListener('click', () => settings.toggle());
    </script>
</body>
</html>
