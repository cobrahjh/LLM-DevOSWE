# Add Component Markers Integration to server.js\n# Run this from the backend directory\n\n$serverFile = \"server.js\"\n$backupFile = \"server.js.backup-$(Get-Date -Format 'yyyy-MM-dd-HHmm')\"\n\nWrite-Host \"Adding Component Markers integration to server.js...\" -ForegroundColor Green\n\n# Create backup\nCopy-Item $serverFile $backupFile\nWrite-Host \"Backup created: $backupFile\" -ForegroundColor Yellow\n\n# Read the current server.js\n$content = Get-Content $serverFile -Raw\n\n# Find insertion points\n$importSection = \"const cameraSystem = require('./camera-system');\"\n$newImport = \"const ComponentMarkersIntegration = require('./component-markers-integration');\"\n\n$initSection = \"const cameraController = new CameraController();\"\n$newInit = \"const componentMarkers = new ComponentMarkersIntegration();\"\n\n# Add imports\nif ($content -notmatch \"component-markers-integration\") {\n    $content = $content -replace [regex]::Escape($importSection), \"$importSection`n$newImport\"\n    Write-Host \"✓ Added component markers import\" -ForegroundColor Green\n} else {\n    Write-Host \"! Component markers import already exists\" -ForegroundColor Yellow\n}\n\n# Add initialization\nif ($content -notmatch \"ComponentMarkersIntegration\") {\n    $content = $content -replace [regex]::Escape($initSection), \"$initSection`n$newInit\"\n    Write-Host \"✓ Added component markers initialization\" -ForegroundColor Green\n} else {\n    Write-Host \"! Component markers initialization already exists\" -ForegroundColor Yellow\n}\n\n# Find where to add API routes (after app.use(express.json());)\n$apiSection = \"app.use(express.json());\"\n$newApiInit = \"`n// Initialize component markers API routes`ncomponentMarkers.initializeRoutes(app);\"\n\nif ($content -notmatch \"componentMarkers.initializeRoutes\") {\n    $content = $content -replace [regex]::Escape($apiSection), \"$apiSection$newApiInit\"\n    Write-Host \"✓ Added component markers API routes initialization\" -ForegroundColor Green\n} else {\n    Write-Host \"! Component markers API routes already exist\" -ForegroundColor Yellow\n}\n\n# Update version\n$content = $content -replace \"const SERVER_VERSION = '1.10.0';\", \"const SERVER_VERSION = '1.11.0';\"\nWrite-Host \"✓ Updated server version to 1.11.0\" -ForegroundColor Green\n\n# Write the updated content back\nSet-Content $serverFile $content -Encoding UTF8\n\nWrite-Host \"Component Markers integration completed!\" -ForegroundColor Green\nWrite-Host \"Server now includes:\" -ForegroundColor Cyan\nWrite-Host \"  - Component processing indicators\" -ForegroundColor White\nWrite-Host \"  - Cost estimation\" -ForegroundColor White\nWrite-Host \"  - API endpoints for markers\" -ForegroundColor White\nWrite-Host \"  - Enhanced home page with indicators\" -ForegroundColor White\n"